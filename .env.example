# ============================================
# CYP-Registry 环境变量配置模板
# 遵循《全平台通用开发任务设计规范文档》第6章配置管理规范
# ============================================

# ============================================
# 应用配置
# ============================================
APP_NAME=CYP-Registry
APP_HOST=0.0.0.0
APP_PORT=8080
APP_ENV=development
APP_DEBUG=true

# ============================================
# 数据库配置 (PostgreSQL 15+)
# ============================================
DB_HOST=localhost
DB_PORT=5432
DB_USER=registry
DB_PASSWORD=change_me_in_production
DB_NAME=registry_db
DB_SSLMODE=disable
DB_MAX_OPEN_CONNS=100
DB_MAX_IDLE_CONNS=10
DB_CONN_MAX_LIFETIME=300

# ============================================
# Redis配置 (Redis 7+)
# ============================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0
REDIS_POOL_SIZE=100
REDIS_MIN_IDLE_CONNS=10
REDIS_KEY_PREFIX=cyp:registry:

# ============================================
# JWT认证配置
# ============================================
JWT_SECRET=your-256-bit-secret-key-change-in-production
JWT_ACCESS_TOKEN_EXPIRE=7200
JWT_REFRESH_TOKEN_EXPIRE=604800

# ============================================
# PAT配置
# ============================================
PAT_PREFIX=pat_v1_
PAT_EXPIRE=2592000

# ============================================
# bcrypt配置
# ============================================
BCRYPT_COST=12

# ============================================
# 存储配置
# ============================================
STORAGE_TYPE=local
STORAGE_LOCAL_ROOT_PATH=./data/storage
STORAGE_MINIO_ENDPOINT=localhost:9000
STORAGE_MINIO_ACCESS_KEY=minioadmin
STORAGE_MINIO_SECRET_KEY=minioadmin
STORAGE_MINIO_BUCKET=registry
STORAGE_MINIO_USE_SSL=false

# ============================================
# 安全配置
# ============================================
SECURITY_RATE_LIMIT_ENABLED=true
SECURITY_RATE_LIMIT_REQUESTS_PER_SECOND=100
SECURITY_BRUTE_FORCE_MAX_ATTEMPTS_PER_MINUTE=10
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:8080

# ============================================
# 日志配置
# ============================================
LOGGING_LEVEL=info
LOGGING_FORMAT=json

# ============================================
# 扫描器配置 (Trivy)
# ============================================
SCANNER_ENABLED=true
SCANNER_BLOCK_ON_CRITICAL=true

# ============================================
# 监控配置
# ============================================
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=admin123

DOCKER_REGISTRY_URL=localhost:8080
