global:
  scrape_interval: 15s
  evaluation_interval: 15s

alerting:
  alertmanagers:
    - static_configs:
        - targets:
            # 如未部署 Alertmanager，可先留空或注释掉本段
            # - "alertmanager:9093"
            []

rule_files:
  - "rules/registry-rules.yml"

scrape_configs:
  # 采集 CYP-Registry 本身的指标（/metrics）
  - job_name: "registry"
    static_configs:
      - targets: ["registry-app:8080"]
    metrics_path: /metrics
    relabel_configs:
      - source_labels: [__address__]
        target_label: instance

  # 采集 PostgreSQL 指标（可选，需在 Postgres 暴露 /metrics 时启用）
  # 例如部署 postgres_exporter 后，将 targets 修改为 exporter 地址
  - job_name: "postgres"
    static_configs:
      - targets: []

  # 采集 Redis 指标（可选，需部署 redis_exporter）
  - job_name: "redis"
    static_configs:
      - targets: []

