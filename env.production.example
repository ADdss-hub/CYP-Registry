############################################
# CYP-Registry 全局配置中心（生产环境模板）
# 生成时间：2026-02-02
#
# 使用说明：
# - 本文件是生产环境用的示例模板，不会被程序自动读取。
# - 如需在生产环境启用“全局配置中心”，请复制为项目根的实际 `.env`：
#     1. 若当前已有 .env，请先手工对比/合并，再替换敏感值；
#     2. 若没有 .env：可直接复制本文件为 `.env` 并按说明修改。
# - 极其重要：所有带 CHANGE_ME 的值在上生产前必须改成真实、安全的值。
############################################

# ======================
# Application
# ======================
APP_NAME=CYP-Registry
APP_HOST=0.0.0.0
APP_PORT=8080
# 生产环境请保持为 production
APP_ENV=production

# ======================
# Database (PostgreSQL)
# ======================
# 单镜像(All-in-One) 模式：
# - 内置 PostgreSQL 运行在容器内 127.0.0.1:5432
# - 如在外部托管数据库，请改为对应地址
DB_HOST=127.0.0.1
DB_PORT=5432
DB_USER=registry
DB_PASSWORD=CHANGE_ME_strong_db_password
DB_NAME=registry_db
DB_SSLMODE=disable

# ======================
# Redis
# ======================
# 单镜像(All-in-One) 模式内置 Redis 监听 127.0.0.1:6379
REDIS_HOST=127.0.0.1
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ======================
# API / Web Endpoints
# ======================
# API_BASE_URL：后端对外暴露的访问地址
#   - 单机/内网示例: http://localhost:8080
#   - 生产示例:     https://registry.your-company.com
API_BASE_URL=http://localhost:8080
# WEB_BASE_URL：前端访问地址（如有单独前端服务）
WEB_BASE_URL=http://localhost:3000

# ======================
# JWT / 安全配置
# ======================
# JWT_SECRET 必须是高熵随机字符串，长度 >= 32 字节
# 上生产前务必替换为只在生产环境知晓的密钥。
JWT_SECRET=CHANGE_ME_long_random_jwt_secret_please_replace

# ======================
# Storage
# ======================
# All-in-One 模式下，镜像内已预创建 /data/storage 并赋予写权限
STORAGE_TYPE=local
STORAGE_LOCAL_ROOT_PATH=/data/storage

# 若改用 MinIO / S3 兼容存储，请设置：
MINIO_ACCESS_KEY=CHANGE_ME_minio_access_key
MINIO_SECRET_KEY=CHANGE_ME_minio_secret_key
MINIO_ENDPOINT=CHANGE_ME_minio_endpoint:9000
MINIO_BUCKET=registry

# ======================
# CORS / 其他
# ======================
# 逗号分隔的允许来源列表；根据实际前端域名调整
# 示例：CORS_ALLOWED_ORIGINS=https://registry.your-company.com,https://console.your-company.com
CORS_ALLOWED_ORIGINS=http://localhost:3000

# Grafana / 其他可选组件，如未使用可保持默认或删除
GRAFANA_ADMIN_USER=admin
GRAFANA_ADMIN_PASSWORD=CHANGE_ME_grafana_admin_password

# ======================
# 服务器关闭与清理配置
# ======================
# CLEANUP_ON_SHUTDOWN：控制服务器关闭时是否清理所有数据
#   1 = 清理所有数据（删除模式）- 会永久删除所有用户数据、项目数据、镜像文件、缓存数据
#   0 或不设置 = 保留数据（停止模式）- 仅关闭服务，保留所有数据
# ⚠️ 警告：设置为 1 时，关闭服务器会永久删除所有数据，此操作不可恢复！
# 适用场景：
#   - 测试环境重置
#   - 开发环境清理
#   - 容器镜像重建前的清理
#   - 完全重置系统
# 生产环境强烈建议设置为 0 或不设置，避免误操作导致数据丢失
CLEANUP_ON_SHUTDOWN=0

